<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link
      rel="alternate"
      type="application/rss+xml"
      href="https://chenyo-17.github.io/org-static-blog/rss.xml"
      title="RSS feed for https://chenyo-17.github.io/org-static-blog"
    />
    <title>org-static-blog</title>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
    ></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'],['\\(','\\)']]}});
    </script>
    <meta name="author" content="chenyo" />
    <meta name="referrer" content="no-referrer" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="static/style.css" type="text/css" />
  </head>
  <body>
    <div id="preamble" class="status">
      <header>
        <h1>
          <a href="https://chenyo-17.github.io/org-static-blog"
            >Chenyo's org-static-blog</a
          >
        </h1>
        <nav>
          <a href="https://chenyo-17.github.io/org-static-blog">Home</a>
          <a href="https://chenyo-17.github.io/org-static-blog/archive.html"
            >Archive</a
          >
          <a href="https://chenyo-17.github.io/org-static-blog/tags.html"
            >Tags</a
          >
        </nav>
      </header>
    </div>
    <div id="content">
      <h1 class="title">Posts tagged "paralle-evm":</h1>
      <div class="post-date">24 Jul 2024</div>
      <h1 class="post-title">
        <a
          href="https://chenyo-17.github.io/org-static-blog/2024-07-24-parallel-evm:-reth.html"
          >parallel-evm: Reth scaling plan</a
        >
      </h1>
      <nav id="table-of-contents" role="doc-toc">
        <h2>Table of Contents</h2>
        <div id="text-table-of-contents" role="doc-toc">
          <ul>
            <li>
              <a href="#orgad06341">1. Blockchain fundamentals</a>
              <ul>
                <li><a href="#orgc2da677">1.1. Ethereum engine API</a></li>
                <li><a href="#org259b952">1.2. Foundry</a></li>
                <li><a href="#orgfd2a06e">1.3. Revm</a></li>
                <li><a href="#orgbff95a4">1.4. Alloy</a></li>
                <li><a href="#org92760f9">1.5. Erigon &amp; Staged sync</a></li>
                <li>
                  <a href="#org8221cf4">1.6. Storage engines</a>
                  <ul>
                    <li><a href="#org982dde1">1.6.1. ACID</a></li>
                    <li>
                      <a href="#org1c2eeee"
                        >1.6.2. MVCC (Multi-version concurrency control)</a
                      >
                    </li>
                    <li>
                      <a href="#org0894c3a">1.6.3. Common database models</a>
                    </li>
                    <li>
                      <a href="#orge25ee43">1.6.4. Common storage engines</a>
                    </li>
                  </ul>
                </li>
                <li><a href="#org089d350">1.7. Reth</a></li>
                <li>
                  <a href="#orgdb7f104"
                    >1.8. Why gas per second as the performance metric</a
                  >
                </li>
                <li><a href="#orgef64042">1.9. EVM cost models</a></li>
                <li><a href="#orgca8c788">1.10. TPC benchmark</a></li>
                <li><a href="#org2d3c6e4">1.11. State growth</a></li>
                <li>
                  <a href="#org2c6094a"
                    >1.12. JIT (Just-In-Time) and AOT (Ahead-of-Time) EVM</a
                  >
                </li>
                <li><a href="#org23fe5d8">1.13. Actor model</a></li>
              </ul>
            </li>
            <li>
              <a href="#org63d9780">2. Reth scaling plan</a>
              <ul>
                <li>
                  <a href="#org3d66d72">2.1. Vertical scaling (2024)</a>
                  <ul>
                    <li><a href="#org034e9e6">2.1.1. JIT/AOT EVM</a></li>
                    <li><a href="#org1a919a3">2.1.2. Parallel EVM</a></li>
                    <li>
                      <a href="#org708473d"
                        >2.1.3. Optimized state commitment (?)</a
                      >
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="#org3eb5f95">2.2. Horizontal scaling (2025)</a>
                  <ul>
                    <li><a href="#orge27cffa">2.2.1. Multi-Rollup</a></li>
                    <li><a href="#org20a34ee">2.2.2. Cloud-Native</a></li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </nav>
      <p>
        This is a personal note for
        <a href="https://www.paradigm.xyz/2024/04/reth-perf"
          >Reth-performance-blog</a
        >
        as well as some terminology explain online, e.g.,
        <a href="https://github.com/paradigmxyz/reth">Reth-repo</a> and
        <a href="https://claude.ai/chat/6364436f-d279-4c6b-947e-237bfea26409"
          >Claude.ai</a
        >.
      </p>
      <div id="outline-container-orgad06341" class="outline-2">
        <h2 id="orgad06341">
          <span class="section-number-2">1.</span> Blockchain fundamentals
        </h2>
        <div class="outline-text-2" id="text-1"></div>
        <div id="outline-container-orgc2da677" class="outline-3">
          <h3 id="orgc2da677">
            <span class="section-number-3">1.1.</span>
            <a
              href="https://github.com/ethereum/execution-apis/blob/a0d03086564ab1838b462befbc083f873dcf0c0f/src/engine/paris.md"
              >Ethereum engine API</a
            >
          </h3>
          <div class="outline-text-3" id="text-1-1">
            <ul class="org-ul">
              <li>
                A collection of JSON-RPC methods that all execution clients
                implement.
              </li>
              <li>
                Specify the interfaces between consensus and execution layers.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org259b952" class="outline-3">
          <h3 id="org259b952">
            <span class="section-number-3">1.2.</span>
            <a href="https://github.com/foundry-rs/foundry/">Foundry</a>
          </h3>
          <div class="outline-text-3" id="text-1-2">
            <ul class="org-ul">
              <li>
                A Rust-written toolkit for Ethereum application development.
              </li>
              <li>
                Consists of an Ethereum testing framework Forge; a framework to
                interact with the chain Cast; a local Ethereum node Anvil; and a
                Solidity REPL (Read-Eval-Print-Loop: an interactive environment)
                Chisel.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-orgfd2a06e" class="outline-3">
          <h3 id="orgfd2a06e">
            <span class="section-number-3">1.3.</span>
            <a href="https://github.com/bluealloy/revm/">Revm</a>
          </h3>
          <div class="outline-text-3" id="text-1-3">
            <ul class="org-ul">
              <li>
                A Rust-written EVM; responsible for executing transactions and
                contracts.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-orgbff95a4" class="outline-3">
          <h3 id="orgbff95a4">
            <span class="section-number-3">1.4.</span>
            <a href="https://github.com/alloy-rs">Alloy</a>
          </h3>
          <div class="outline-text-3" id="text-1-4">
            <ul class="org-ul">
              <li>
                A library to interact with the Ethereum and other EVM-base
                chains.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org92760f9" class="outline-3">
          <h3 id="org92760f9">
            <span class="section-number-3">1.5.</span>
            <a href="https://erigon.tech/">Erigon</a> &amp; Staged sync
          </h3>
          <div class="outline-text-3" id="text-1-5">
            <ul class="org-ul">
              <li>
                Erigon: a Go-written Ethereum client implementation (execution
                layer).
              </li>
              <li>
                Staged sync: break the chain synchronization process into
                distinct stages in order to achieve better efficiency.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org8221cf4" class="outline-3">
          <h3 id="org8221cf4">
            <span class="section-number-3">1.6.</span> Storage engines
          </h3>
          <div class="outline-text-3" id="text-1-6"></div>
          <div id="outline-container-org982dde1" class="outline-4">
            <h4 id="org982dde1">
              <span class="section-number-4">1.6.1.</span> ACID
            </h4>
            <div class="outline-text-4" id="text-1-6-1">
              <ul class="org-ul">
                <li>
                  A set of properties for database transactions: atomicity,
                  consistency, isolation, duration.
                </li>
                <li>
                  Atomicity: a transaction is treated as an indivisible unit; if
                  any part of the transaction fails, the entire transaction is
                  rolled back.
                </li>
                <li>
                  Consistency: a transaction brings the database from one valid
                  state to another.
                </li>
                <li>
                  Isolation: concurrent transaction execution leave the database
                  in the same state as if transactions are executed sequentially
                </li>
                <li>
                  Duration: a committed transaction remains committed even when
                  the system fails.
                </li>
              </ul>
            </div>
          </div>
          <div id="outline-container-org1c2eeee" class="outline-4">
            <h4 id="org1c2eeee">
              <span class="section-number-4">1.6.2.</span> MVCC (Multi-version
              concurrency control)
            </h4>
            <div class="outline-text-4" id="text-1-6-2">
              <ul class="org-ul">
                <li>A concurrency control model used in DBMS.</li>
                <li>
                  MVCC keeps multiple version of data simultaneously, each
                  transaction sees a snapshot of the database.
                </li>
              </ul>
            </div>
          </div>
          <div id="outline-container-org0894c3a" class="outline-4">
            <h4 id="org0894c3a">
              <span class="section-number-4">1.6.3.</span> Common database
              models
            </h4>
            <div class="outline-text-4" id="text-1-6-3">
              <ul class="org-ul">
                <li>Relational model, e.g., SQL.</li>
                <li>Document model.</li>
                <li>Network model.</li>
                <li>key-value, e.g., NoSQL.</li>
              </ul>
            </div>
          </div>
          <div id="outline-container-orge25ee43" class="outline-4">
            <h4 id="orge25ee43">
              <span class="section-number-4">1.6.4.</span> Common storage
              engines
            </h4>
            <div class="outline-text-4" id="text-1-6-4">
              <ul class="org-ul">
                <li>
                  MDBX: Ultra-fate key-value embedded database with ACID and
                  MVCC supported.
                </li>
                <li>
                  LevelDB: Google-developed key-value store using log-structured
                  merge-tree for high write throughput.
                </li>
                <li>
                  RocksDB: Meta&rsquo;s fork of LevelDB, optimized for fast
                  storage.
                </li>
                <li>
                  LSM-based DBs, e.g., BadgerDB: optimized for write-heavy
                  workloads with log-structured merge-tree.
                </li>
                <li>
                  BoltDB: Go-written key-value database with optimized B+ tree,
                  ACID supported.
                </li>
                <li>
                  LMDB: memory-mapped key-value store with ACID and MVCC
                  supported.
                </li>
              </ul>
            </div>
          </div>
        </div>
        <div id="outline-container-org089d350" class="outline-3">
          <h3 id="org089d350">
            <span class="section-number-3">1.7.</span> Reth
          </h3>
          <div class="outline-text-3" id="text-1-7">
            <ul class="org-ul">
              <li>
                A Rust implementation of an Ethereum full node; allows users to
                interact with the Ethereum blockchain.
              </li>
              <li>
                An execution layer that implements all Ethereum engine APIs.
              </li>
              <li>Modularity: every component is built as a library.</li>
              <li>
                Performance: uses Erigon staged-sync node architecture and other
                Rust libraries (e.g., Alloy, revm); tests and optimizes on
                Foundry.
              </li>
              <li>Database/Storage engine: MDBX.</li>
            </ul>
          </div>
        </div>
        <div id="outline-container-orgdb7f104" class="outline-3">
          <h3 id="orgdb7f104">
            <span class="section-number-3">1.8.</span> Why gas per second as the
            performance metric
          </h3>
          <div class="outline-text-3" id="text-1-8">
            <ul class="org-ul">
              <li>More nuanced than TPS.</li>
              <li>
                Allows for a clear understanding for the capacity and
                efficiency.
              </li>
              <li>Helps assessing the cost implications, e.g., DoS attacks.</li>
            </ul>
          </div>
        </div>
        <div id="outline-container-orgef64042" class="outline-3">
          <h3 id="orgef64042">
            <span class="section-number-3">1.9.</span> EVM cost models
          </h3>
          <div class="outline-text-3" id="text-1-9">
            <ul class="org-ul">
              <li>
                Determines the computational and storage costs for the
                execution.
              </li>
              <li>
                Key aspects: gas, gas cost (for each operation), gas price (in
                Wei), gas limit.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-orgca8c788" class="outline-3">
          <h3 id="orgca8c788">
            <span class="section-number-3">1.10.</span> TPC benchmark
          </h3>
          <div class="outline-text-3" id="text-1-10">
            <ul class="org-ul">
              <li>
                Standardized performance tests for transaction processing and
                databases, e.g., how many transactions a system can process in a
                given period.
              </li>
              <li>
                Offer benchmarks for different scenarios, e.g., TPC-C for online
                transaction processing.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org2d3c6e4" class="outline-3">
          <h3 id="org2d3c6e4">
            <span class="section-number-3">1.11.</span> State growth
          </h3>
          <div class="outline-text-3" id="text-1-11">
            <ul class="org-ul">
              <li>
                State: the set of data for building and validating new Ethereum
                blocks.
              </li>
              <li>
                State growth: the accumulation of new account and new contract
                storage.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org2c6094a" class="outline-3">
          <h3 id="org2c6094a">
            <span class="section-number-3">1.12.</span> JIT (Just-In-Time) and
            AOT (Ahead-of-Time) EVM
          </h3>
          <div class="outline-text-3" id="text-1-12">
            <ul class="org-ul">
              <li>
                JIT: convert bytecode to native machine code just before
                execution to bypass the VM&rsquo;s interpretative process.
              </li>
              <li>
                AOT: compile the highest demand contracts and store them on
                disk, to avoid untrusted bytecode absuing native-code
                compilation.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org23fe5d8" class="outline-3">
          <h3 id="org23fe5d8">
            <span class="section-number-3">1.13.</span> Actor model
          </h3>
          <div class="outline-text-3" id="text-1-13">
            <ul class="org-ul">
              <li>A paradigm/framework for designing distributed systems.</li>
              <li>
                Actor: each actor is an independent entity to receive, process
                and send messages; create new actors or modify its state.
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div id="outline-container-org63d9780" class="outline-2">
        <h2 id="org63d9780">
          <span class="section-number-2">2.</span> Reth scaling plan
        </h2>
        <div class="outline-text-2" id="text-2">
          <ul class="org-ul">
            <li>
              Current status (April 2024): achieves 100-200 mg/s during live
              sync, including sender recovery, transaction execution and block
              trie calculation.
            </li>
            <li>The scaling plan does not involve solving state growth.</li>
          </ul>
        </div>
        <div id="outline-container-org3d66d72" class="outline-3">
          <h3 id="org3d66d72">
            <span class="section-number-3">2.1.</span> Vertical scaling (2024)
          </h3>
          <div class="outline-text-3" id="text-2-1">
            <ul class="org-ul">
              <li>Optimize how each system handle transactions and data.</li>
            </ul>
          </div>
          <div id="outline-container-org034e9e6" class="outline-4">
            <h4 id="org034e9e6">
              <span class="section-number-4">2.1.1.</span> JIT/AOT EVM
            </h4>
            <div class="outline-text-4" id="text-2-1-1">
              <ul class="org-ul">
                <li>
                  Reduce EVM interpreter overhead to speed up single-threaded
                  transaction processing.
                </li>
                <li>The processing costs \(\approx\) 50% EVM time</li>
                <li>
                  Released on
                  <a href="https://www.paradigm.xyz/2024/06/revmc">June 2024</a
                  >.
                </li>
              </ul>

              <figure id="orgf9d03a2">
                <img
                  src="https://www.paradigm.xyz/static/reth-perf/3.png"
                  alt="3.png"
                  align="center"
                  width="500px"
                />

                <figcaption>
                  <span class="figure-number">Figure 1: </span>The JIT/AOT
                  compiler (<a
                    href="https://www.paradigm.xyz/static/reth-perf/3.png"
                    >source</a
                  >)
                </figcaption>
              </figure>
            </div>
          </div>
          <div id="outline-container-org1a919a3" class="outline-4">
            <h4 id="org1a919a3">
              <span class="section-number-4">2.1.2.</span> Parallel EVM
            </h4>
            <div class="outline-text-4" id="text-2-1-2">
              <ul class="org-ul">
                <li>Utilize multiple cores during EVM execution.</li>
                <li>
                  &lt;80% of historical transactions have non-conflicting
                  dependencies.
                </li>
                <li>
                  Historical sync: can calculate the best parallelization
                  schedule offine; an early attempt is
                  <a
                    href="https://github.com/paradigmxyz/reth/tree/rkrasiuk/parallel"
                    >available</a
                  >.
                </li>
                <li>
                  Live sync: combine serial and parallel execution based on
                  static analysis, since Block STM has poor performance during
                  heavy state contention periods; an early attempt is
                  <a href="https://github.com/risechain/pevm">available</a>.
                </li>
              </ul>
            </div>
          </div>
          <div id="outline-container-org708473d" class="outline-4">
            <h4 id="org708473d">
              <span class="section-number-4">2.1.3.</span> Optimized state
              commitment (?)
            </h4>
            <div class="outline-text-4" id="text-2-1-3">
              <ul class="org-ul">
                <li>
                  In Reth, the state root is computed based on a KV database
                  updated by transaction execution, thus the database is
                  trie-agnostic.
                </li>
                <li>
                  The state root computation costs &gt;75% of end-to-end block
                  production time.
                </li>
                <li>
                  Fully parallelized state root: calculate the accounts trie in
                  parallel while computing state root (how?).
                </li>
                <li>
                  Pipelined state root: pre-fetch intermediate trie nodes from
                  the disk.
                </li>
              </ul>
            </div>
          </div>
        </div>
        <div id="outline-container-org3eb5f95" class="outline-3">
          <h3 id="org3eb5f95">
            <span class="section-number-3">2.2.</span> Horizontal scaling (2025)
          </h3>
          <div class="outline-text-3" id="text-2-2">
            <ul class="org-ul">
              <li>Spread the workload across multiple systems.</li>
            </ul>
          </div>
          <div id="outline-container-orge27cffa" class="outline-4">
            <h4 id="orge27cffa">
              <span class="section-number-4">2.2.1.</span> Multi-Rollup
            </h4>
            <div class="outline-text-4" id="text-2-2-1">
              <ul class="org-ul">
                <li>
                  Reduce operational overhead of running multiple rollups.
                </li>
              </ul>
            </div>
          </div>
          <div id="outline-container-org20a34ee" class="outline-4">
            <h4 id="org20a34ee">
              <span class="section-number-4">2.2.2.</span> Cloud-Native
            </h4>
          </div>
        </div>
      </div>
      <div class="taglist">
        <a href="https://chenyo-17.github.io/org-static-blog/tags.html">Tags</a
        >:
        <a href="https://chenyo-17.github.io/org-static-blog/tag-evm.html"
          >evm</a
        >
        <a
          href="https://chenyo-17.github.io/org-static-blog/tag-paralle-evm.html"
          >paralle-evm</a
        >
        <a href="https://chenyo-17.github.io/org-static-blog/tag-reth.html"
          >reth</a
        >
      </div>

      <div class="post-date">28 Jun 2024</div>
      <h1 class="post-title">
        <a
          href="https://chenyo-17.github.io/org-static-blog/2024-06-28-parallel-evm:-sei-v2.html"
          >Parallel EVM: Sei-v2</a
        >
      </h1>
      <nav id="table-of-contents" role="doc-toc">
        <h2>Table of Contents</h2>
        <div id="text-table-of-contents" role="doc-toc">
          <ul>
            <li>
              <a href="#orgea14092">1. Blockchain fundamentals</a>
              <ul>
                <li><a href="#org576100f">1.1. Mainnet and Testnet</a></li>
                <li><a href="#orge0833b6">1.2. Mainnet Alpha and Beta</a></li>
                <li><a href="#orgab9ded1">1.3. Layer 1 and Layer 2</a></li>
                <li><a href="#org364029f">1.4. Rollups</a></li>
                <li><a href="#org19c7b33">1.5. State channels</a></li>
                <li><a href="#org5d5dd5a">1.6. Sidechains</a></li>
                <li><a href="#orgdd29a94">1.7. Ethereum and EVM</a></li>
                <li><a href="#orgfd9a5ff">1.8. IAVL tree</a></li>
                <li><a href="#orga79ba86">1.9. CosmWasm contract</a></li>
                <li><a href="#org88c5135">1.10. Cosmos Ecosystem</a></li>
                <li><a href="#orgc92e811">1.11. Blockchain layers</a></li>
                <li>
                  <a href="#orgd9884f1">1.12. Optimistic parallelization</a>
                </li>
                <li>
                  <a href="#orgd3416df"
                    >1.13. Integrated and Modular blockchain</a
                  >
                </li>
                <li>
                  <a href="#org513355c"
                    >1.14. EVM Execution and storage layer</a
                  >
                </li>
                <li>
                  <a href="#org5aecc0a">1.15. Block time and finalize time</a>
                </li>
                <li><a href="#orgad8c29c">1.16. Blockchain audit</a></li>
              </ul>
            </li>
            <li><a href="#org4313fbe">2. What is Sei</a></li>
            <li>
              <a href="#orgece446d">3. What is Sei v2</a>
              <ul>
                <li><a href="#org418b53c">3.1. Backwards compatibility</a></li>
                <li>
                  <a href="#org2e3242a">3.2. Optimistic parallelization</a>
                </li>
                <li><a href="#org8498b72">3.3. SeiDB</a></li>
                <li><a href="#org2550050">3.4. Interoperability</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </nav>
      <p>
        This is a personal note for
        <a href="https://blog.sei.io/sei-v2-the-first-parallelized-evm/"
          >Sei-v2-blog</a
        >
        as well as some terminology explained by
        <a href="https://chatgpt.com/g/g-TJq7kBEsX-evm-gpt">EVM GPT</a>.
      </p>
      <div id="outline-container-orgea14092" class="outline-2">
        <h2 id="orgea14092">
          <span class="section-number-2">1.</span> Blockchain fundamentals
        </h2>
        <div class="outline-text-2" id="text-1"></div>
        <div id="outline-container-org576100f" class="outline-3">
          <h3 id="org576100f">
            <span class="section-number-3">1.1.</span> Mainnet and Testnet
          </h3>
          <div class="outline-text-3" id="text-1-1">
            <ul class="org-ul">
              <li>
                Mainnet: real transactions occur and have real-world value; any
                operation is final and irreversible.
              </li>
              <li>
                Testnet: a sandbox environment with test cryptocurrencies
                without real-world value.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-orge0833b6" class="outline-3">
          <h3 id="orge0833b6">
            <span class="section-number-3">1.2.</span> Mainnet Alpha and Beta
          </h3>
          <div class="outline-text-3" id="text-1-2">
            <ul class="org-ul">
              <li>
                Alpha: test core functionalities and gather initial feedback in
                live environment.
              </li>
              <li>
                Beta: more stable and feature-complete, but still need more
                testing.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-orgab9ded1" class="outline-3">
          <h3 id="orgab9ded1">
            <span class="section-number-3">1.3.</span> Layer 1 and Layer 2
          </h3>
          <div class="outline-text-3" id="text-1-3">
            <ul class="org-ul">
              <li>
                L1: the main network where all transactions are processed and
                the primary chain is maintained.
              </li>
              <li>
                L2: secondary frameworks on top of L1 chain, aimed to enhance
                scalability without compromising the security of the L1.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org364029f" class="outline-3">
          <h3 id="org364029f">
            <span class="section-number-3">1.4.</span> Rollups
          </h3>
          <div class="outline-text-3" id="text-1-4">
            <ul class="org-ul">
              <li>
                Processes transactions off-chain and periodically submits a
                summary (rollup) to L1.
              </li>
              <li>
                Optimistic rollups: assume transactions are valid be default and
                use a challenge period to allow disputes
                <ul class="org-ul">
                  <li>Examples: Optimism, Arbitrum.</li>
                </ul>
              </li>
              <li>
                ZK-rollups: use zero-knowledge proofs to validate transactions.
                <ul class="org-ul">
                  <li>Examples: zkSync, StarkNet.</li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org19c7b33" class="outline-3">
          <h3 id="org19c7b33">
            <span class="section-number-3">1.5.</span> State channels
          </h3>
          <div class="outline-text-3" id="text-1-5">
            <ul class="org-ul">
              <li>
                allow participants to conduct numerous off-chain transactions,
                with only the final state recorded on the L1.
              </li>
              <li>Examples: Bitcoin lightning network.</li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org5d5dd5a" class="outline-3">
          <h3 id="org5d5dd5a">
            <span class="section-number-3">1.6.</span> Sidechains
          </h3>
          <div class="outline-text-3" id="text-1-6">
            <ul class="org-ul">
              <li>
                Independent blockchains running parallel to the main chain, with
                own consensus and security.
              </li>
              <li>Examples: Polygon.</li>
            </ul>
          </div>
        </div>
        <div id="outline-container-orgdd29a94" class="outline-3">
          <h3 id="orgdd29a94">
            <span class="section-number-3">1.7.</span> Ethereum and EVM
          </h3>
          <div class="outline-text-3" id="text-1-7">
            <ul class="org-ul">
              <li>
                Ethereum: a blockchain ecosystem, includes the blockchain,
                consensus mechanism, smart contracts, native cryptocurrency.
              </li>
              <li>
                EVM: the runtime environment to execute smart contracts in
                Ethereum.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-orgfd9a5ff" class="outline-3">
          <h3 id="orgfd9a5ff">
            <span class="section-number-3">1.8.</span> IAVL tree
          </h3>
          <div class="outline-text-3" id="text-1-8">
            <ul class="org-ul">
              <li>
                AVL tree: self-balancing binary tree where the difference in
                heights between left and right subtrees of anynode is at most
                one.
              </li>
              <li>
                IAVL tree: immutable AVL tree; node cannot be changed once it is
                added.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-orga79ba86" class="outline-3">
          <h3 id="orga79ba86">
            <span class="section-number-3">1.9.</span> CosmWasm contract
          </h3>
          <div class="outline-text-3" id="text-1-9">
            <ul class="org-ul">
              <li>
                Allows developers to write fast and portable smart contracts in
                WebAssembly.
              </li>
              <li>
                Designed to be interoperable within in the Cosmos ecosystem, a
                network of independent blockchains connected via the
                Inter-blockchain communication (IBC) protocol.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org88c5135" class="outline-3">
          <h3 id="org88c5135">
            <span class="section-number-3">1.10.</span> Cosmos Ecosystem
          </h3>
          <div class="outline-text-3" id="text-1-10">
            <ul class="org-ul">
              <li>
                A network of independent, interoperable blockchains designed to
                create an Internet of blockchain.
              </li>
              <li>
                Decouples the consensus (BFT consensus engine) and networking
                (IBC protocol) layers from the application layers
              </li>
              <li>
                Cosmos SDK: a modular framework for building
                application-specific blockchains efficiently.
              </li>
              <li>
                Cosmos Hub: the first blockchain in the Cosmos network, serves
                as a central hub to connect multiple blockchains via IBC.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-orgc92e811" class="outline-3">
          <h3 id="orgc92e811">
            <span class="section-number-3">1.11.</span> Blockchain layers
          </h3>
          <div class="outline-text-3" id="text-1-11">
            <ul class="org-ul">
              <li>
                Infrastructure layer: the physical devices that support the
                network; and the underlying communication protocols for data
                transfer between nodes.
              </li>
              <li>
                Data layer: the distributed ledger and the storage methods.
              </li>
              <li>
                Consensus layer: the protocols, validators and miners;
                determines the transaction orders.
              </li>
              <li>
                Execution layer: smart contracts and virtual machines;
                determines the transaction update.
              </li>
              <li>
                Application layer: dApps to provide service and user interfaces.
              </li>
              <li>
                Governance layer: the community decision-making process and
                proposals.
              </li>
              <li>
                Security layer: cryptographic primitives and security protocols
                to avoid attacks.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-orgd9884f1" class="outline-3">
          <h3 id="orgd9884f1">
            <span class="section-number-3">1.12.</span> Optimistic
            parallelization
          </h3>
          <div class="outline-text-3" id="text-1-12">
            <ul class="org-ul">
              <li>
                Multiple transactions are processed in parallel under the
                assumption that they will conflict with each other; necessary
                corrections are made afterwards if conflicts are detected.
              </li>
              <li>Increase throughput if conflicts are well handled.</li>
            </ul>
          </div>
        </div>
        <div id="outline-container-orgd3416df" class="outline-3">
          <h3 id="orgd3416df">
            <span class="section-number-3">1.13.</span> Integrated and Modular
            blockchain
          </h3>
          <div class="outline-text-3" id="text-1-13">
            <ul class="org-ul">
              <li>
                Integrated: all components, e.g., execution layer, consensus
                mechanism, networking are tightly coupled; faster internal
                communication but lower flexibility and scalability.
              </li>
              <li>
                Modular: allow independent upgrades for different components;
                enhance scalability.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org513355c" class="outline-3">
          <h3 id="org513355c">
            <span class="section-number-3">1.14.</span> EVM Execution and
            storage layer
          </h3>
          <div class="outline-text-3" id="text-1-14">
            <ul class="org-ul">
              <li>
                Execution: responsible for running smart contracts and
                processing transactions.
              </li>
              <li>
                Storage: store all blockchain data, e.g., accounts, smart
                contract states, transaction history.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org5aecc0a" class="outline-3">
          <h3 id="org5aecc0a">
            <span class="section-number-3">1.15.</span> Block time and finalize
            time
          </h3>
          <div class="outline-text-3" id="text-1-15">
            <ul class="org-ul">
              <li>Block: the average time for a new block to be added.</li>
              <li>
                Finalize: the period after which a block is considered
                irreversible.
              </li>
              <li>
                Faster block times often imply cheaper transaction fees due to
                increased transaction throughput and less block competition.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-orgad8c29c" class="outline-3">
          <h3 id="orgad8c29c">
            <span class="section-number-3">1.16.</span> Blockchain audit
          </h3>
          <div class="outline-text-3" id="text-1-16">
            <ul class="org-ul">
              <li>
                A review of a blockchain to ensures its security and
                functionality.
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div id="outline-container-org4313fbe" class="outline-2">
        <h2 id="org4313fbe">
          <span class="section-number-2">2.</span> What is Sei
        </h2>
        <div class="outline-text-2" id="text-2">
          <ul class="org-ul">
            <li>On mainnet beta since August 2023.</li>
            <li>
              Consistently finalizes blocks at 390ms; the fastest chain in
              existence.
            </li>
            <li>
              Consistently sees activity of &gt;45 TPS (transaction per
              seconds); the second highest number of successful transactions per
              second.
            </li>
            <li>
              Allows for Cosmwasm smart contracts written in Rust; more
              execution environments like EVM is the biggest request.
            </li>
          </ul>
        </div>
      </div>
      <div id="outline-container-orgece446d" class="outline-2">
        <h2 id="orgece446d">
          <span class="section-number-2">3.</span> What is Sei v2
        </h2>
        <div class="outline-text-2" id="text-3">
          <ul class="org-ul">
            <li>The first fully parallelized EVM.</li>
            <li>Backwards compatibility of EVM smart contracts.</li>
            <li>
              Optimistic parallelization; support parallelization without
              requiring any dependencies.
            </li>
            <li>
              Improves the storage layer to prevent state bloat, read/write, and
              state sync for new nodes.
            </li>
            <li>
              Seamless composability between different execution environments.
            </li>
            <li>
              Offers 28,300 batched transactions per second of throughput; 390ms
              block times and 390ms finality; far cheaper per-transaction costs.
            </li>
            <li>
              Once audits are complete, the upgrade is released in a public
              testnet in Q1 2024, and deployed to mainnet in H1 2024.
            </li>
          </ul>
        </div>
        <div id="outline-container-org418b53c" class="outline-3">
          <h3 id="org418b53c">
            <span class="section-number-3">3.1.</span> Backwards compatibility
          </h3>
          <div class="outline-text-3" id="text-3-1">
            <ul class="org-ul">
              <li>
                Ethereum contracts can be seamlessly deployed on Sei v2 with no
                code changes.
              </li>
              <li>
                User can send a Eth transaction to the Ethereum contract on Sei
                v2 via the same interface, e.g., Metamask, Hardhat.
              </li>
              <li>
                Sei v2 imports Geth (a Go EVM implementation) to process the Eth
                transaction, and convert the result to Sei storage.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org2e3242a" class="outline-3">
          <h3 id="org2e3242a">
            <span class="section-number-3">3.2.</span> Optimistic
            parallelization
          </h3>
          <div class="outline-text-3" id="text-3-2">
            <ul class="org-ul">
              <li>
                Sei requires smart contract developers to optionally define the
                state that smart contracts are using, Sei v2 removes this need.
              </li>
              <li>
                Sei v2 chain optimistically runs all transactions in parallel,
                when reaching conflicts, i.e., transactions touching the same
                state, the chain tracks the storage parts each transaction is
                touching.
              </li>
              <li>
                Transactions touching different parts will be rerun in parallel;
                transactions touching the same state will be rerun sequentially.
              </li>
              <li>Recursively continue until no more conflicts.</li>
              <li>
                Since the transactions are ordered in a block, this process is
                deterministic.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org8498b72" class="outline-3">
          <h3 id="org8498b72">
            <span class="section-number-3">3.3.</span> SeiDB
          </h3>
          <div class="outline-text-3" id="text-3-3">
            <ul class="org-ul">
              <li>
                Sei uses a vanilla database layer composed of an IAVL tree,
                which is less efficient in terms of storage and latency.
              </li>
              <li>
                Sei v2 breaks the single IAVL tree into 2 components:
                <ul class="org-ul">
                  <li>
                    state store: provide low latency direct access to raw
                    key-value pairs to remove the overhead of redundant metadata
                    and disk usage; uses a write-ahead log to help event
                    recovery.
                  </li>
                  <li>
                    state commitment: use an in-memory IAVL tree to help
                    validators reach consensus faster.
                  </li>
                </ul>
              </li>
              <li>
                After benchmarking, Sei v2 replaces GoLevelDB with PebbleDB for
                better read/write in multi-threaded access.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org2550050" class="outline-3">
          <h3 id="org2550050">
            <span class="section-number-3">3.4.</span> Interoperability
          </h3>
          <div class="outline-text-3" id="text-3-4">
            <ul class="org-ul">
              <li>
                Sei v2 processes different transactions, e.g., Cosmwasm, EVM in
                a uniformed way, and then forwards them to different storage
                sections.
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="taglist">
        <a href="https://chenyo-17.github.io/org-static-blog/tags.html">Tags</a
        >:
        <a href="https://chenyo-17.github.io/org-static-blog/tag-evm.html"
          >evm</a
        >
        <a
          href="https://chenyo-17.github.io/org-static-blog/tag-paralle-evm.html"
          >paralle-evm</a
        >
        <a href="https://chenyo-17.github.io/org-static-blog/tag-sei.html"
          >sei</a
        >
      </div>
      <div id="archive">
        <a href="https://chenyo-17.github.io/org-static-blog/archive.html"
          >Other posts</a
        >
      </div>
    </div>
    <div id="postamble" class="status">
      <footer>
        <p>© 2024 chenyo. Some rights reserved.</p>
      </footer>
    </div>
  </body>
</html>

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link
      rel="alternate"
      type="application/rss+xml"
      href="https://chenyo-17.github.io/org-static-blog/rss.xml"
      title="RSS feed for https://chenyo-17.github.io/org-static-blog"
    />
    <title>org-static-blog</title>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
    ></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'],['\\(','\\)']]}});
    </script>
    <meta name="author" content="chenyo" />
    <meta name="referrer" content="no-referrer" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="assets/style.css" type="text/css" />
    <link rel="favicon" type="image/x-icon" href="assets/favicon.ico" />
    <script src="assets/search.js"></script>
  </head>
  <body>
    <div id="preamble" class="status">
      <header>
        <h1>
          <a href="https://chenyo-17.github.io/org-static-blog"
            >Chenyo's org-static-blog</a
          >
        </h1>
        <nav>
          <a href="https://chenyo-17.github.io/org-static-blog">Home</a>
          <a href="archive.html">Archive</a>
          <a href="tags.html">Tags</a>
          <div id="search-container">
            <input
              type="text"
              id="search-input"
              placeholder="Search anywhere..."
            />
          </div>
        </nav>
      </header>
    </div>
    <div id="content">
      <h2>Welcome!</h2>
      <p>Take a look if you are bored.</p>
      <div class="post-date">15 Aug 2024</div>
      <h1 class="post-title">
        <a
          href="https://chenyo-17.github.io/org-static-blog/2024-08-15-web-learning-in-practice.html"
          >Web learning in practice</a
        >
      </h1>
      <nav id="table-of-contents" role="doc-toc">
        <h2>Table of Contents</h2>
        <div id="text-table-of-contents" role="doc-toc">
          <ul>
            <li><a href="#org301ad16">1. Basic html structure</a></li>
            <li><a href="#orgaa858a8">2. Tags</a></li>
            <li><a href="#org355807d">3. Attributes</a></li>
          </ul>
        </div>
      </nav>
      <p>
        This post records the basic web development knowledge I have learned in
        practice.
      </p>
      <div id="outline-container-org301ad16" class="outline-2">
        <h2 id="org301ad16">
          <span class="section-number-2">1.</span> Basic html structure
        </h2>
        <div class="outline-text-2" id="text-1">
          <div class="org-src-container">
            <pre
              class="src src-html"
            >&lt;<span style="color: #51afef;">!DOCTYPE</span> html&gt;
&lt;<span style="color: #c678dd;">html</span> <span style="color: #dcaeea;">lang</span>=<span style="color: #98be65;">"en"</span>&gt;

    <span style="color: #5B6268;">&lt;!-- </span><span style="color: #5B6268;">A head</span><span style="color: #5B6268;"> --&gt;</span>
    &lt;<span style="color: #c678dd;">head</span>&gt;
        &lt;<span style="color: #c678dd;">meta</span> <span style="color: #dcaeea;">charset</span>=<span style="color: #98be65;">"UTF-8"</span>&gt;
        <span style="color: #5B6268;">&lt;!-- </span><span style="color: #5B6268;">to accommodate different screen size</span><span style="color: #5B6268;"> --&gt;</span>
        &lt;<span style="color: #c678dd;">meta</span> <span style="color: #dcaeea;">name</span>=<span style="color: #98be65;">"viewport"</span> <span style="color: #dcaeea;">content</span>=<span style="color: #98be65;">"width=device-width, initial-scale=1.0"</span>&gt;
        <span style="color: #5B6268;">&lt;!-- </span><span style="color: #5B6268;">A tab name</span><span style="color: #5B6268;"> --&gt;</span>
        &lt;<span style="color: #c678dd;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">A website</span>&lt;/<span style="color: #c678dd;">title</span>&gt;
        &lt;<span style="color: #c678dd;">link</span> <span style="color: #dcaeea;">rel</span>=<span style="color: #98be65;">"stylesheet"</span> <span style="color: #dcaeea;">href</span>=<span style="color: #98be65;">"styles.css"</span>&gt;
    &lt;/<span style="color: #c678dd;">head</span>&gt;


    <span style="color: #5B6268;">&lt;!-- </span><span style="color: #5B6268;">A body</span><span style="color: #5B6268;"> --&gt;</span>
    &lt;&lt;<span style="color: #c678dd;">body</span>&gt;
    <span style="color: #5B6268;">&lt;!-- </span><span style="color: #5B6268;">A page header</span><span style="color: #5B6268;">  --&gt;</span>
    &lt;<span style="color: #c678dd;">header</span>&gt;
        &lt;<span style="color: #c678dd;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">Welcome</span>&lt;/<span style="color: #c678dd;">h1</span>&gt;
    &lt;/<span style="color: #c678dd;">header</span>&gt;

    <span style="color: #5B6268;">&lt;!-- </span><span style="color: #5B6268;">A navigation panel</span><span style="color: #5B6268;"> --&gt;</span>
    &lt;<span style="color: #c678dd;">nav</span>&gt;
        &lt;<span style="color: #c678dd;">ul</span>&gt;
        &lt;&lt;<span style="color: #c678dd;">li</span>&gt;&lt;<span style="color: #c678dd;">a</span> <span style="color: #dcaeea;">href</span>=<span style="color: #98be65;">"index.html"</span>&gt;Home&lt;/<span style="color: #c678dd;">a</span>&gt;&lt;/<span style="color: #c678dd;">li</span>&gt;
        &lt;/<span style="color: #c678dd;">ul</span>&gt;
    &lt;/<span style="color: #c678dd;">nav</span>&gt;

    <span style="color: #5B6268;">&lt;!-- </span><span style="color: #5B6268;">The main content</span><span style="color: #5B6268;"> --&gt;</span>
    &lt;<span style="color: #c678dd;">main</span>&gt;
        &lt;<span style="color: #c678dd;">section</span> <span style="color: #dcaeea;">id</span>=<span style="color: #98be65;">"home"</span>&gt;
        &lt;<span style="color: #c678dd;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">Home</span>&lt;/<span style="color: #c678dd;">h2</span>&gt;
        &lt;<span style="color: #c678dd;">p</span>&gt;Welcome!&lt;/<span style="color: #c678dd;">p</span>&gt;
        &lt;/<span style="color: #c678dd;">section</span>&gt;
    &lt;/<span style="color: #c678dd;">main</span>&gt;

    <span style="color: #5B6268;">&lt;!-- </span><span style="color: #5B6268;">A footer</span><span style="color: #5B6268;"> --&gt;</span>
    &lt;<span style="color: #c678dd;">footer</span>&gt;
        &lt;<span style="color: #c678dd;">p</span>&gt;<span style="color: #dcaeea;">&amp;copy;</span> All rights reserved.&lt;/<span style="color: #c678dd;">p</span>&gt;
    &lt;/<span style="color: #c678dd;">footer</span>&gt;
    &lt;/<span style="color: #c678dd;">body</span>&gt;

&lt;/<span style="color: #c678dd;">html</span>&gt;
</pre>
          </div>
        </div>
      </div>
      <div id="outline-container-orgaa858a8" class="outline-2">
        <h2 id="orgaa858a8"><span class="section-number-2">2.</span> Tags</h2>
        <div class="outline-text-2" id="text-2">
          <ul class="org-ul">
            <li>
              <code>&lt;a&gt;</code>: contain links; have following attributes:
              <ul class="org-ul">
                <li>
                  <code>target="_blank"</code>: open the link in a new tab.
                </li>
                <li>
                  <code>title="Go to the link"</code>: the tooltip message,
                  i.e., the floating message when a user hovers over.
                </li>
              </ul>
            </li>
            <li>
              <code>&lt;span&gt;</code>: don&rsquo;t add line breaks before or
              after it.
            </li>
            <li><code>&lt;hr&gt;</code>: horizontal rule.</li>
          </ul>
        </div>
      </div>
      <div id="outline-container-org355807d" class="outline-2">
        <h2 id="org355807d">
          <span class="section-number-2">3.</span> Attributes
        </h2>
        <div class="outline-text-2" id="text-3">
          <ul class="org-ul">
            <li>
              <code>id="home"</code>:
              <ul class="org-ul">
                <li>
                  allow specific styling of the element, e.g.,
                  <code>#home ul {...}</code> only styles the <code>ul</code> in
                  the block with the same id.
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
      <div class="taglist">
        <a href="https://chenyo-17.github.io/org-static-blog/tags.html">Tags</a
        >:
        <a href="https://chenyo-17.github.io/org-static-blog/tag-web.html"
          >web</a
        >
        <a href="https://chenyo-17.github.io/org-static-blog/tag-app.html"
          >app</a
        >
      </div>
      <div class="post-date">13 Aug 2024</div>
      <h1 class="post-title">
        <a
          href="https://chenyo-17.github.io/org-static-blog/2024-08-13-db-notes:-memory-management.html"
          >CMU 15-445 notes: Memory Management</a
        >
      </h1>
      <nav id="table-of-contents" role="doc-toc">
        <h2>Table of Contents</h2>
        <div id="text-table-of-contents" role="doc-toc">
          <ul>
            <li><a href="#org878eac8">1. Goals</a></li>
            <li>
              <a href="#orgae344d8">2. Locks &amp; Latches</a>
              <ul>
                <li><a href="#orgb42efab">2.1. Locks</a></li>
                <li><a href="#orgd9fd27c">2.2. Latches</a></li>
              </ul>
            </li>
            <li>
              <a href="#org298a910">3. Buffer pool</a>
              <ul>
                <li><a href="#org2d90453">3.1. Metadata</a></li>
                <li>
                  <a href="#orgb63f3f7">3.2. Memory allocation policies</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="#org3805579">4. Buffer pool optimizations</a>
              <ul>
                <li><a href="#org9b43666">4.1. Multiple buffer pools</a></li>
                <li><a href="#org13e62f9">4.2. Pre-fetching</a></li>
                <li><a href="#orgdf3f7fb">4.3. Scan sharing</a></li>
                <li><a href="#org8a553b9">4.4. Buffer pool bypass</a></li>
              </ul>
            </li>
            <li>
              <a href="#org3bb9063">5. Buffer replacement policies</a>
              <ul>
                <li>
                  <a href="#org5442e67">5.1. Least recently used (LRU)</a>
                </li>
                <li><a href="#org2d21f4d">5.2. Clock</a></li>
                <li>
                  <a href="#org8589567">5.3. LRU-K</a>
                  <ul>
                    <li>
                      <a href="#org60fb0f6">5.3.1. MySQL approximate LRU-K</a>
                    </li>
                  </ul>
                </li>
                <li><a href="#org8442957">5.4. Localization</a></li>
                <li><a href="#orgeb7a1fd">5.5. Priority hint</a></li>
                <li><a href="#org50e6724">5.6. Dirty pages</a></li>
              </ul>
            </li>
            <li><a href="#org44ca5e9">6. Other memory pools</a></li>
            <li><a href="#org21effca">7. OS cache bypass</a></li>
            <li><a href="#org3b99925">8. I/O scheduling</a></li>
          </ul>
        </div>
      </nav>
      <p>
        This is a personal note for the
        <a
          href="https://15445.courses.cs.cmu.edu/fall2023/notes/06-bufferpool.pdf"
          >CMU 15-445 L6 notes</a
        >
        as well as some explanation from Claude.ai.
      </p>
      <div id="outline-container-org878eac8" class="outline-2">
        <h2 id="org878eac8"><span class="section-number-2">1.</span> Goals</h2>
        <div class="outline-text-2" id="text-1">
          <ul class="org-ul">
            <li>
              Manage DBMS memory and move data between the memory and the disk,
              such that the execution engine does no worry about the data
              fetching.
            </li>
            <li>
              Spatial control: keep relevant pages physically together on disk.
            </li>
            <li>
              Temporal control: minimize the number of stalls to read data from
              the disk.
            </li>
          </ul>
        </div>
      </div>
      <div id="outline-container-orgae344d8" class="outline-2">
        <h2 id="orgae344d8">
          <span class="section-number-2">2.</span> Locks &amp; Latches
        </h2>
        <div class="outline-text-2" id="text-2">
          <ul class="org-ul">
            <li>Both used to protect internal elements.</li>
          </ul>
        </div>
        <div id="outline-container-orgb42efab" class="outline-3">
          <h3 id="orgb42efab">
            <span class="section-number-3">2.1.</span> Locks
          </h3>
          <div class="outline-text-3" id="text-2-1">
            <ul class="org-ul">
              <li>
                A high-level logical primitive to allow for transaction
                atomicity.
              </li>
              <li>Exposed to users when queries are run.</li>
              <li>Need to be able to rollback changes.</li>
            </ul>
          </div>
        </div>
        <div id="outline-container-orgd9fd27c" class="outline-3">
          <h3 id="orgd9fd27c">
            <span class="section-number-3">2.2.</span> Latches
          </h3>
          <div class="outline-text-3" id="text-2-2">
            <ul class="org-ul">
              <li>
                A low-level protection primitive a DBMS uses in its internal
                data structures, e.g., hash tables.
              </li>
              <li>Only held when the operation is being made, like a mutex.</li>
              <li>
                Do not need to expose to users or used to rollback changes.
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div id="outline-container-org298a910" class="outline-2">
        <h2 id="org298a910">
          <span class="section-number-2">3.</span> Buffer pool
        </h2>
        <div class="outline-text-2" id="text-3">
          <ul class="org-ul">
            <li>An in-memory cache of pages read from the disk.</li>
            <li>
              The buffer pool&rsquo;s region of memory is organized as an array
              of fixed size pages; each array entry is called a frame.
            </li>
            <li>
              When the DBMS requests a page, the buffer pool first searches its
              cache, if not found, it copies he page from the disk into one of
              its frame.
            </li>
            <li>
              Dirty pages (i.e., modified pages) are buffered rather than
              writing back immediately.
            </li>
          </ul>
        </div>
        <div id="outline-container-org2d90453" class="outline-3">
          <h3 id="org2d90453">
            <span class="section-number-3">3.1.</span> Metadata
          </h3>
          <div class="outline-text-3" id="text-3-1">
            <ul class="org-ul">
              <li>
                Page table: An in-memory hash mapping page ids to frame
                locations in the buffer pool.
              </li>
              <li>
                Dirty flag: set by a thread whenever it modifies a page to
                indicate the pages must be written back to disk.
              </li>
              <li>
                Pin/Reference counter: tracks the number of threads that are
                currently accessing the page; the storage manager is not allowed
                to evict a page if its pin count is greater than 0.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-orgb63f3f7" class="outline-3">
          <h3 id="orgb63f3f7">
            <span class="section-number-3">3.2.</span> Memory allocation
            policies
          </h3>
          <div class="outline-text-3" id="text-3-2">
            <ul class="org-ul">
              <li>
                The buffer pool decides when to allocate a frame for a page.
              </li>
              <li>
                Global policies: decisions based on the overall workload, e.g.,
                least recently used (LRU) or clock algorithm.
              </li>
              <li>
                Local policies: decisions applying to specific query, e.g.,
                priority-based page replacement.
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div id="outline-container-org3805579" class="outline-2">
        <h2 id="org3805579">
          <span class="section-number-2">4.</span> Buffer pool optimizations
        </h2>
        <div class="outline-text-2" id="text-4"></div>
        <div id="outline-container-org9b43666" class="outline-3">
          <h3 id="org9b43666">
            <span class="section-number-3">4.1.</span> Multiple buffer pools
          </h3>
          <div class="outline-text-3" id="text-4-1">
            <ul class="org-ul">
              <li>
                Each database or page can have its own buffer pool and adopts
                local policies to reduce latch contention.
              </li>
              <li>
                To map a page to a buffer pool, the DBMS can use object IDs or
                page IDs as the key.
                <ul class="org-ul">
                  <li>
                    Record ID: a unique identifier for a row in a table (cf.
                    <a
                      href="https://chenyo-17.github.io/org-static-blog/tag-database.html#org2317270"
                      >Tuple layout post</a
                    >).
                  </li>
                  <li>
                    Object ID: a unique identifier for an object, used to
                    reference a user-defined type.
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org13e62f9" class="outline-3">
          <h3 id="org13e62f9">
            <span class="section-number-3">4.2.</span> Pre-fetching
          </h3>
          <div class="outline-text-3" id="text-4-2">
            <ul class="org-ul">
              <li>
                While the first set of pages is being processed, the DBMS can
                pre-fetch the second set into the buffer pool based on the
                dependency between pages.
                <ul class="org-ul">
                  <li>
                    E.g., If pages are index-organized, the sibling pages can be
                    pre-fetched.
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-orgdf3f7fb" class="outline-3">
          <h3 id="orgdf3f7fb">
            <span class="section-number-3">4.3.</span> Scan sharing
          </h3>
          <div class="outline-text-3" id="text-4-3">
            <ul class="org-ul">
              <li>Query cursors can reuse retrieved data.</li>
              <li>
                When a query comes while a previous query is being processed by
                scanning the table, the new query can attach its scanning cursor
                to the first query&rsquo;s cursor.
              </li>
              <li>
                The DBMS keeps track of where the second query joined to make
                sure it also completes the scan.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org8a553b9" class="outline-3">
          <h3 id="org8a553b9">
            <span class="section-number-3">4.4.</span> Buffer pool bypass
          </h3>
          <div class="outline-text-3" id="text-4-4">
            <ul class="org-ul">
              <li>
                Scanned pages do not have to be stored in the buffer pool to
                avoid the overhead.
              </li>
              <li>
                Use cases: a query needs to read a large sequence of contiguous
                pages; temporary pages like sorting or joins.
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div id="outline-container-org3bb9063" class="outline-2">
        <h2 id="org3bb9063">
          <span class="section-number-2">5.</span> Buffer replacement policies
        </h2>
        <div class="outline-text-2" id="text-5">
          <ul class="org-ul">
            <li>
              The DBMS decides which page to evict from the buffer pool to free
              up a frame.
            </li>
          </ul>
        </div>
        <div id="outline-container-org5442e67" class="outline-3">
          <h3 id="org5442e67">
            <span class="section-number-3">5.1.</span> Least recently used (LRU)
          </h3>
          <div class="outline-text-3" id="text-5-1">
            <ul class="org-ul">
              <li>
                LRU maintains a timestamp of when each page was last accessed,
                and evicts the page with the oldest timestamp.
                <ul class="org-ul">
                  <li>
                    The timestamp can be stored in a queue for efficient
                    sorting.
                  </li>
                </ul>
              </li>
              <li>
                Susceptible to sequential flooding, where the buffer pool is
                corrupted due to a sequential scan.
                <ul class="org-ul">
                  <li>
                    With the LRU policy the oldest pages are evicted, but they
                    are more likely to be scanned soon.
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org2d21f4d" class="outline-3">
          <h3 id="org2d21f4d">
            <span class="section-number-3">5.2.</span> Clock
          </h3>
          <div class="outline-text-3" id="text-5-2">
            <ul class="org-ul">
              <li>
                An approximation of LRU but replace the timestamp with a
                reference bit which is set to 1 when a page is accessed.
              </li>
              <li>
                Regularly sweeping all pages, if a bit is set to 1, reset to 0;
                if a bit is 0, evict the page.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org8589567" class="outline-3">
          <h3 id="org8589567">
            <span class="section-number-3">5.3.</span> LRU-K
          </h3>
          <div class="outline-text-3" id="text-5-3">
            <ul class="org-ul">
              <li>
                Tracks the last K accessed timestamps to predict the next
                accessed time, hence avoid the sequential flooding issue.
              </li>
            </ul>
          </div>
          <div id="outline-container-org60fb0f6" class="outline-4">
            <h4 id="org60fb0f6">
              <span class="section-number-4">5.3.1.</span> MySQL approximate
              LRU-K
            </h4>
            <div class="outline-text-4" id="text-5-3-1">
              <ul class="org-ul">
                <li>
                  Use a linked list with two entry points: &ldquo;old&rdquo; and
                  &ldquo;young&rdquo;.
                </li>
                <li>
                  The new pages are always inserted to the head of
                  &ldquo;old&rdquo;.
                </li>
                <li>
                  If a page in the &ldquo;old&rdquo; is accessed again, it is
                  then inserted to the head of &ldquo;young&rdquo;.
                </li>
              </ul>
            </div>
          </div>
        </div>
        <div id="outline-container-org8442957" class="outline-3">
          <h3 id="org8442957">
            <span class="section-number-3">5.4.</span> Localization
          </h3>
          <div class="outline-text-3" id="text-5-4">
            <ul class="org-ul">
              <li>
                Instead of using a global replacement policy, the DBMS make
                eviction decisions based on each query.
              </li>
              <li>
                Pages brought in by one query are less likely to evict pages
                that are important for other ongoing queries.
              </li>
              <li>
                The DBMS can <b><b>predicts</b></b> more accurately which pages
                should stay or be evicted once the query is complete, so that
                the buffer pool is less polluted with less useful pages.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-orgeb7a1fd" class="outline-3">
          <h3 id="orgeb7a1fd">
            <span class="section-number-3">5.5.</span> Priority hint
          </h3>
          <div class="outline-text-3" id="text-5-5">
            <ul class="org-ul">
              <li>
                Transactions tell the buffer pool where pages are important
                based on the <b><b>context</b></b> of each page.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org50e6724" class="outline-3">
          <h3 id="org50e6724">
            <span class="section-number-3">5.6.</span> Dirty pages
          </h3>
          <div class="outline-text-3" id="text-5-6">
            <ul class="org-ul">
              <li>
                Two ways to handle dirty pages in the buffer pool:
                <ul class="org-ul">
                  <li>Fast: only drop clean pages.</li>
                  <li>
                    Slow: write back dirty pages to ensure persistent change,
                    and then evict them (if they will not be read again.).
                  </li>
                </ul>
              </li>
              <li>
                Can periodically walk through the page table and write back
                dirty pages in the background.
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div id="outline-container-org44ca5e9" class="outline-2">
        <h2 id="org44ca5e9">
          <span class="section-number-2">6.</span> Other memory pools
        </h2>
        <div class="outline-text-2" id="text-6">
          <ul class="org-ul">
            <li>
              A DBMS also maintains other pools to store:
              <ul class="org-ul">
                <li>query caches,</li>
                <li>logs,</li>
                <li>temporary tables, e.g., sorting, join,</li>
                <li>dictionary caches.</li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
      <div id="outline-container-org21effca" class="outline-2">
        <h2 id="org21effca">
          <span class="section-number-2">7.</span> OS cache bypass
        </h2>
        <div class="outline-text-2" id="text-7">
          <ul class="org-ul">
            <li>
              Most DBMS use direct I/O (e.g., with <code>fsync</code> instead of
              <code>fwrite</code>) to bypass the OS cache to avoid redundant
              page copy and to manage eviction policies more intelligently (cf.
              <a
                href="https://chenyo-17.github.io/org-static-blog/tag-database.html#org611ff38"
                >Why not OS post</a
              >).
            </li>
          </ul>
        </div>
      </div>
      <div id="outline-container-org3b99925" class="outline-2">
        <h2 id="org3b99925">
          <span class="section-number-2">8.</span> I/O scheduling
        </h2>
        <div class="outline-text-2" id="text-8">
          <ul class="org-ul">
            <li>
              The DBMS maintains internal <b><b>queue</b></b> to track page
              read/write.
            </li>
            <li>
              The priority are determined by multi-facets, e.g., critical path
              task, SLAs.
            </li>
          </ul>
        </div>
      </div>
      <div class="taglist">
        <a href="https://chenyo-17.github.io/org-static-blog/tags.html">Tags</a
        >:
        <a href="https://chenyo-17.github.io/org-static-blog/tag-study.html"
          >study</a
        >
        <a href="https://chenyo-17.github.io/org-static-blog/tag-database.html"
          >database</a
        >
        <a href="https://chenyo-17.github.io/org-static-blog/tag-cmu.html"
          >cmu</a
        >
      </div>
      <div class="post-date">08 Aug 2024</div>
      <h1 class="post-title">
        <a
          href="https://chenyo-17.github.io/org-static-blog/2024-08-08-db-notes:-storage-models-&-compression.html"
          >CMU 15-445 notes: Storage Models & Compression</a
        >
      </h1>
      <nav id="table-of-contents" role="doc-toc">
        <h2>Table of Contents</h2>
        <div id="text-table-of-contents" role="doc-toc">
          <ul>
            <li>
              <a href="#org85a1c9b">1. Database workloads</a>
              <ul>
                <li>
                  <a href="#org4b1d669"
                    >1.1. OLTP (Online Transaction Processing)</a
                  >
                </li>
                <li>
                  <a href="#org6bce54a"
                    >1.2. OLAP (Online Analytical Processing)</a
                  >
                </li>
                <li><a href="#orgc0961e0">1.3. HTAP (Hybrid)</a></li>
              </ul>
            </li>
            <li>
              <a href="#org4813278">2. Storage models</a>
              <ul>
                <li>
                  <a href="#org6a897a6">2.1. N-ary Storage Model (NSM)</a>
                </li>
                <li>
                  <a href="#orgba64f33"
                    >2.2. Decomposition Storage Model (DSM)</a
                  >
                </li>
                <li>
                  <a href="#org56babf1"
                    >2.3. Partition Attributes Across (PAX)</a
                  >
                </li>
              </ul>
            </li>
            <li>
              <a href="#orgac94013">3. Database compression</a>
              <ul>
                <li><a href="#org9f06ac0">3.1. Compression granularity</a></li>
                <li><a href="#org49dfe33">3.2. Naive compression</a></li>
              </ul>
            </li>
            <li>
              <a href="#orgd8cef0f">4. Columnar compression</a>
              <ul>
                <li><a href="#orgeb97923">4.1. Dictionary encoding</a></li>
                <li>
                  <a href="#org8cc690b">4.2. Run-Length encoding (RLE)</a>
                </li>
                <li><a href="#org99c27c8">4.3. Bit-packing encoding</a></li>
                <li><a href="#org16ea5e2">4.4. Mostly encoding</a></li>
                <li>
                  <a href="#orgdca6d3c">4.5. Bitmap (One-hot) encoding</a>
                </li>
                <li><a href="#org6283a50">4.6. Delta encoding</a></li>
                <li><a href="#org3992a89">4.7. Incremental encoding</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </nav>
      <p>
        This is a personal note for the
        <a
          href="https://15445.courses.cs.cmu.edu/fall2023/notes/05-storage3.pdf"
          >CMU 15-445 L5 notes</a
        >.
      </p>
      <div id="outline-container-org85a1c9b" class="outline-2">
        <h2 id="org85a1c9b">
          <span class="section-number-2">1.</span> Database workloads
        </h2>
        <div class="outline-text-2" id="text-1"></div>
        <div id="outline-container-org4b1d669" class="outline-3">
          <h3 id="org4b1d669">
            <span class="section-number-3">1.1.</span> OLTP (Online Transaction
            Processing)
          </h3>
          <div class="outline-text-3" id="text-1-1">
            <ul class="org-ul">
              <li>
                Characterized by fast, repetitive, simple queries that operator
                on a small amount of data, e.g., a user adds an item to its
                Amazon cart and pay.
              </li>
              <li>Usually more writes than read.</li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org6bce54a" class="outline-3">
          <h3 id="org6bce54a">
            <span class="section-number-3">1.2.</span> OLAP (Online Analytical
            Processing)
          </h3>
          <div class="outline-text-3" id="text-1-2">
            <ul class="org-ul">
              <li>Characterized by complex read queries on large data.</li>
              <li>E.g., compute the most popular item in a period.</li>
            </ul>
          </div>
        </div>
        <div id="outline-container-orgc0961e0" class="outline-3">
          <h3 id="orgc0961e0">
            <span class="section-number-3">1.3.</span> HTAP (Hybrid)
          </h3>
          <div class="outline-text-3" id="text-1-3">
            <ul class="org-ul">
              <li>OLTP + OLAP.</li>
            </ul>
          </div>
        </div>
      </div>
      <div id="outline-container-org4813278" class="outline-2">
        <h2 id="org4813278">
          <span class="section-number-2">2.</span> Storage models
        </h2>
        <div class="outline-text-2" id="text-2">
          <ul class="org-ul">
            <li>Different ways to store tuples in pages.</li>
          </ul>
        </div>
        <div id="outline-container-org6a897a6" class="outline-3">
          <h3 id="org6a897a6">
            <span class="section-number-3">2.1.</span> N-ary Storage Model (NSM)
          </h3>
          <div class="outline-text-3" id="text-2-1">
            <ul class="org-ul">
              <li>
                Store all attributes for a single tuple contiguously in a single
                page, e.g., slotted pages.
              </li>
              <li>
                Pros: good for queries that need the entire tuple, e.g., OLTP.
              </li>
              <li>
                Cons: inefficient for scanning large data with a few attributes,
                e.g., OLAP.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-orgba64f33" class="outline-3">
          <h3 id="orgba64f33">
            <span class="section-number-3">2.2.</span> Decomposition Storage
            Model (DSM)
          </h3>
          <div class="outline-text-3" id="text-2-2">
            <ul class="org-ul">
              <li>
                Store each attribute for all tuples contiguously in a block of
                data, i.e., column store.
              </li>
              <li>
                Pros: save I/O; better data compression; ideal for bulk single
                attribute queries like OLAP.
              </li>
              <li>
                Cons: slow for point queries due to tuple splitting, e.g., OLTP.
              </li>
              <li>
                2 common ways to put back tuples:
                <ul class="org-ul">
                  <li>
                    Most common: use fixed-length offsets, e.g., the value in a
                    given column belong to the same tuple as the value in
                    another column at the same offset.
                  </li>
                  <li>
                    Less common: use embedded tuple ids, e.g., each attribute is
                    associated with the tuple id, and the DBMS stores a mapping
                    to jump to any attribute with the given tuple id.
                  </li>
                </ul>
              </li>
            </ul>

            <figure id="orgc775856">
              <img
                src="./static/db-dsm-storage-model.png"
                alt="db-dsm-storage-model.png"
                align="center"
                width="550px"
              />

              <figcaption>
                <span class="figure-number">Figure 1: </span>DSM storage model
                (<a
                  href="https://15445.courses.cs.cmu.edu/fall2023/slides/05-storage3.pdf"
                  >Source</a
                >)
              </figcaption>
            </figure>
          </div>
        </div>
        <div id="outline-container-org56babf1" class="outline-3">
          <h3 id="org56babf1">
            <span class="section-number-3">2.3.</span> Partition Attributes
            Across (PAX)
          </h3>
          <div class="outline-text-3" id="text-2-3">
            <ul class="org-ul">
              <li>
                Rows are horizontally partitioned into groups of rows; each row
                group uses a column store.
              </li>
              <li>
                A PAX file has a global header containing a directory with each
                row group&rsquo;s offset; each row group maintains its own
                header with content metadata.
              </li>
            </ul>

            <figure id="org8caf991">
              <img
                src="./static/db-pax-storage-model.png"
                alt="db-pax-storage-model.png"
                align="center"
                width="300px"
              />

              <figcaption>
                <span class="figure-number">Figure 2: </span>PAX storage model
                (<a
                  href="https://15445.courses.cs.cmu.edu/fall2023/slides/05-storage3.pdf"
                  >Source</a
                >)
              </figcaption>
            </figure>
          </div>
        </div>
      </div>
      <div id="outline-container-orgac94013" class="outline-2">
        <h2 id="orgac94013">
          <span class="section-number-2">3.</span> Database compression
        </h2>
        <div class="outline-text-2" id="text-3">
          <ul class="org-ul">
            <li>
              Disk I/O is always the main bottleneck; read-only analytical
              workloads are popular; compression in advance allows for more I/O
              throughput.
            </li>
            <li>
              <b><b>Real-world</b></b> data sets have the following properties
              for compression:
              <ul class="org-ul">
                <li>
                  <b><b>Highly skewed</b></b> distributions for attribute
                  values.
                </li>
                <li>
                  <b><b>High correlation</b></b> between attributes of the same
                  tuple, e.g., zip code to city.
                </li>
              </ul>
            </li>
            <li>
              Requirements on the database compression:
              <ul class="org-ul">
                <li>
                  Fixed-length values to follow word-alignment; variable length
                  data stored in separate mappings.
                </li>
                <li>
                  Postpone decompression as long as possible during query
                  execution, i.e., <b><b>late materialization</b></b
                  >.
                </li>
                <li>
                  Lossless; any lossy compression can only be performed at the
                  application level.
                </li>
              </ul>
            </li>
          </ul>
        </div>
        <div id="outline-container-org9f06ac0" class="outline-3">
          <h3 id="org9f06ac0">
            <span class="section-number-3">3.1.</span> Compression granularity
          </h3>
          <div class="outline-text-3" id="text-3-1">
            <ul class="org-ul">
              <li>Block level: compress all tuples for the same table.</li>
              <li>Tuple level: compress each tuple (NSM only).</li>
              <li>
                Attribute level: compress one or multiple values within one
                tuple.
              </li>
              <li>
                Columnar level: compress one or multiple columns across multiple
                tuples (DSM only).
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org49dfe33" class="outline-3">
          <h3 id="org49dfe33">
            <span class="section-number-3">3.2.</span> Naive compression
          </h3>
          <div class="outline-text-3" id="text-3-2">
            <ul class="org-ul">
              <li>
                Engineers often use a general purpose compression algorithm with
                lower compression ratio in exchange for faster
                compression/decompression.
              </li>
              <li>
                E.g., compress disk pages by padding them to a power of 2KBs and
                storing them in the buffer pool.
                <ul class="org-ul">
                  <li>
                    Why small chunk: must decompress before reading/writing the
                    data every time, hence need o limit the compression scope.
                  </li>
                </ul>
              </li>
              <li>
                Does not consider the high-level data semantics, thus cannot
                utilize late materialization.
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div id="outline-container-orgd8cef0f" class="outline-2">
        <h2 id="orgd8cef0f">
          <span class="section-number-2">4.</span> Columnar compression
        </h2>
        <div class="outline-text-2" id="text-4">
          <ul class="org-ul">
            <li>
              Works best with OLAP, may need additional support for writes.
            </li>
          </ul>
        </div>
        <div id="outline-container-orgeb97923" class="outline-3">
          <h3 id="orgeb97923">
            <span class="section-number-3">4.1.</span> Dictionary encoding
          </h3>
          <div class="outline-text-3" id="text-4-1">
            <ul class="org-ul">
              <li>
                The most common database compression scheme, support late
                materialization.
              </li>
              <li>
                Replace frequent value patterns with smaller codes, and use a
                dictionary to map codes to their original values.
              </li>
              <li>
                Need to support fast encoding and decoding, so hash function is
                impossible.
              </li>
              <li>
                Need to support order-preserving encodings, i.e., sorting codes
                in the same order as original values, to support
                <b><b>range queries</b></b
                >.
                <ul class="org-ul">
                  <li>
                    E.g., when <code>SELECT DISTINCT</code> with
                    pattern-matching, the DBMS only needs to scan the encoding
                    dictionary (but without <code>DISTINCT</code> it still needs
                    to scan the whole column).
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org8cc690b" class="outline-3">
          <h3 id="org8cc690b">
            <span class="section-number-3">4.2.</span> Run-Length encoding (RLE)
          </h3>
          <div class="outline-text-3" id="text-4-2">
            <ul class="org-ul">
              <li>
                Compress runs (consecutive instances) of the same value in a
                column into triplets <code>(value, offset, length)</code>.
              </li>
              <li>
                Need to cluster same column values to maximize the compression.
              </li>
            </ul>

            <figure id="org6382298">
              <img
                src="./static/db-rle-storage-model.png"
                alt="db-rle-storage-model.png"
                align="center"
                width="550px"
              />

              <figcaption>
                <span class="figure-number">Figure 3: </span>Run-length encoding
                (<a
                  href="https://15445.courses.cs.cmu.edu/fall2023/slides/05-storage3.pdf"
                  >Source</a
                >)
              </figcaption>
            </figure>
          </div>
        </div>
        <div id="outline-container-org99c27c8" class="outline-3">
          <h3 id="org99c27c8">
            <span class="section-number-3">4.3.</span> Bit-packing encoding
          </h3>
          <div class="outline-text-3" id="text-4-3">
            <ul class="org-ul">
              <li>Use less bits to store an attribute.</li>
            </ul>

            <figure id="orgf423227">
              <img
                src="./static/db-bit-packing-storage-model.png"
                alt="db-bit-packing-storage-model.png"
                align="center"
                width="250px"
              />

              <figcaption>
                <span class="figure-number">Figure 4: </span>Bit-packing
                encoding (<a
                  href="https://15445.courses.cs.cmu.edu/fall2023/slides/05-storage3.pdf"
                  >Source</a
                >)
              </figcaption>
            </figure>
          </div>
        </div>
        <div id="outline-container-org16ea5e2" class="outline-3">
          <h3 id="org16ea5e2">
            <span class="section-number-3">4.4.</span> Mostly encoding
          </h3>
          <div class="outline-text-3" id="text-4-4">
            <ul class="org-ul">
              <li>
                Use a special marker to indicate values that exceed the bit size
                and maintains a look-up table to store them.
              </li>
            </ul>

            <figure id="orgd9086f0">
              <img
                src="./static/db-mostly-encoding-storage-model.png"
                alt="db-mostly-encoding-storage-model.png"
                align="center"
                width="550px"
              />

              <figcaption>
                <span class="figure-number">Figure 5: </span>Mostly encoding (<a
                  href="https://15445.courses.cs.cmu.edu/fall2023/slides/05-storage3.pdf"
                  >Source</a
                >)
              </figcaption>
            </figure>
          </div>
        </div>
        <div id="outline-container-orgdca6d3c" class="outline-3">
          <h3 id="orgdca6d3c">
            <span class="section-number-3">4.5.</span> Bitmap (One-hot) encoding
          </h3>
          <div class="outline-text-3" id="text-4-5">
            <ul class="org-ul">
              <li>Only practical if the value cardinality is low.</li>
            </ul>

            <figure id="org128413a">
              <img
                src="./static/db-bitmap-encoding-storage-model.png"
                alt="db-bitmap-encoding-storage-model.png"
                align="center"
                width="400px"
              />

              <figcaption>
                <span class="figure-number">Figure 6: </span>Bitmap encoding (<a
                  href="https://15445.courses.cs.cmu.edu/fall2023/slides/05-storage3.pdf"
                  >Source</a
                >)
              </figcaption>
            </figure>
          </div>
        </div>
        <div id="outline-container-org6283a50" class="outline-3">
          <h3 id="org6283a50">
            <span class="section-number-3">4.6.</span> Delta encoding
          </h3>
          <div class="outline-text-3" id="text-4-6">
            <ul class="org-ul">
              <li>
                Record the difference between values; the base value can be
                stored in-line or in a separate look-up table.
              </li>
              <li>Can be combined with RLE encoding.</li>
            </ul>

            <figure id="orgad0e884">
              <img
                src="./static/db-delta-encoding-storage-model.png"
                alt="db-delta-encoding-storage-model.png"
                align="center"
                width="500px"
              />

              <figcaption>
                <span class="figure-number">Figure 7: </span>Delta encoding (<a
                  href="https://15445.courses.cs.cmu.edu/fall2023/slides/05-storage3.pdf"
                  >Source</a
                >)
              </figcaption>
            </figure>
          </div>
        </div>
        <div id="outline-container-org3992a89" class="outline-3">
          <h3 id="org3992a89">
            <span class="section-number-3">4.7.</span> Incremental encoding
          </h3>
          <div class="outline-text-3" id="text-4-7">
            <ul class="org-ul">
              <li>
                Common prefixes or suffixes and their lengths are recorded to
                avoid duplication.
              </li>
              <li>Need to sort the data first.</li>
            </ul>
          </div>
        </div>
      </div>
      <div class="taglist">
        <a href="https://chenyo-17.github.io/org-static-blog/tags.html">Tags</a
        >:
        <a href="https://chenyo-17.github.io/org-static-blog/tag-study.html"
          >study</a
        >
        <a href="https://chenyo-17.github.io/org-static-blog/tag-database.html"
          >database</a
        >
        <a href="https://chenyo-17.github.io/org-static-blog/tag-cmu.html"
          >cmu</a
        >
      </div>
      <div class="post-date">08 Aug 2024</div>
      <h1 class="post-title">
        <a
          href="https://chenyo-17.github.io/org-static-blog/2024-08-08-parallel-evm:-blockworks-bigger-picture.html"
          >Parallel EVM: Blockworks news (Sei, Monad, Solana)</a
        >
      </h1>
      <nav id="table-of-contents" role="doc-toc">
        <h2>Table of Contents</h2>
        <div id="text-table-of-contents" role="doc-toc">
          <ul>
            <li>
              <a href="#orgdee51c2">1. Terminology</a>
              <ul>
                <li><a href="#orgef8953b">1.1. Ethereum sharding</a></li>
                <li><a href="#org82cfc61">1.2. Blob</a></li>
                <li><a href="#org998178e">1.3. Erasure coding</a></li>
                <li>
                  <a href="#org3f05a82"
                    >1.4. Data availability sampling (DAS)</a
                  >
                </li>
                <li>
                  <a href="#org38a3e6f">1.5. Danksharding (L2 optimization)</a>
                </li>
                <li>
                  <a href="#org97e6238"
                    >1.6. Relations between L1 and L2 scaling</a
                  >
                </li>
                <li>
                  <a href="#orge51e3af">1.7. Double spending prevention</a>
                </li>
                <li><a href="#org66c488b">1.8. Sealevel (Solana)</a></li>
              </ul>
            </li>
            <li>
              <a href="#org1430b39">2. Ways to achieve parallel processing</a>
            </li>
            <li>
              <a href="#org7dbed89"
                >3. Production-ready parallelized EVM projects (Jan 2024)</a
              >
            </li>
          </ul>
        </div>
      </nav>
      <p>
        This is a personal note for
        <a
          href="https://blockworks.co/news/parallelized-evms-gaining-popularity"
          >Blockworks news (12.01.2024)</a
        >
        as well as some terminology explained online, e.g.,
        <a
          href="https://www.coindesk.com/learn/what-is-ethereum-sharding-a-beginners-guide/"
          >Coindesk</a
        >
        and
        <a href="https://chatgpt.com/c/824f05c9-dc75-4eb6-aeda-59d057baf83a"
          >GPT-4o</a
        >.
      </p>
      <div id="outline-container-orgdee51c2" class="outline-2">
        <h2 id="orgdee51c2">
          <span class="section-number-2">1.</span> Terminology
        </h2>
        <div class="outline-text-2" id="text-1"></div>
        <div id="outline-container-orgef8953b" class="outline-3">
          <h3 id="orgef8953b">
            <span class="section-number-3">1.1.</span> Ethereum sharding
          </h3>
          <div class="outline-text-3" id="text-1-1">
            <ul class="org-ul">
              <li>
                The Ethereum mainnet is divided into smaller interconnected
                networks called shards.
              </li>
              <li>
                Each shard processes and validates its own transactions parallel
                to others.
              </li>
              <li>
                Pros: increase scalability and <b><b>participation</b></b
                >.
              </li>
              <li>
                Cons: a single unit can be compromised; lead to centralization.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org82cfc61" class="outline-3">
          <h3 id="org82cfc61">
            <span class="section-number-3">1.2.</span> Blob
          </h3>
          <div class="outline-text-3" id="text-1-2">
            <ul class="org-ul">
              <li>
                Rather than storing each transaction data directly in the
                blockchain, the data is aggregated into a blob (binary object).
              </li>
              <li>
                Each blob performs erasure coding to dive the blob into multiple
                smaller pieces with redundancy.
              </li>
              <li>
                Encoded pieces are stored separately, the block header contain
                pointers to the piece locations without storing actual data.
              </li>
              <li>
                Transactions in a block may be distributed across multiple
                blobs.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org998178e" class="outline-3">
          <h3 id="org998178e">
            <span class="section-number-3">1.3.</span> Erasure coding
          </h3>
          <div class="outline-text-3" id="text-1-3">
            <ul class="org-ul">
              <li>
                Allows one to encode blobs such that if at least half of the
                data in the blob is published, anyone in the network can
                reconstruct and re-publish the rest of the data.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org3f05a82" class="outline-3">
          <h3 id="org3f05a82">
            <span class="section-number-3">1.4.</span> Data availability
            sampling (DAS)
          </h3>
          <div class="outline-text-3" id="text-1-4">
            <ul class="org-ul">
              <li>
                Validators randomly sample blob pieces to confirm the data can
                be reconstructed.g
              </li>
              <li>
                If a client cannot get enough pieces to verify the blob
                availability, or the blob fails the integrity check, or
                transactions within the blob are invalid or inconsistent with
                the blockchain state, the blob is rejected.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org38a3e6f" class="outline-3">
          <h3 id="org38a3e6f">
            <span class="section-number-3">1.5.</span> Danksharding (L2
            optimization)
          </h3>
          <div class="outline-text-3" id="text-1-5">
            <ul class="org-ul">
              <li>A specific sharding implementation proposal.</li>
              <li>
                Require data availability sampling and
                <a
                  href="https://chenyo-17.github.io/org-static-blog/tag-evm.html#orgf2db0ef"
                  >proposer-builder separation</a
                >.
              </li>
              <li>Can support hundreds of individual rollups.</li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org97e6238" class="outline-3">
          <h3 id="org97e6238">
            <span class="section-number-3">1.6.</span> Relations between L1 and
            L2 scaling
          </h3>
          <div class="outline-text-3" id="text-1-6">
            <ul class="org-ul">
              <li>
                L1 scaling: optimizations directly to the Ethereum mainnet and
                core infrastructure, e.g., parallel EVM.
              </li>
              <li>
                L2 scaling: building secondary rollup layers, e.g., optimistic
                rollups and ZK rollups, to offload mainnet computation and
                storage.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-orge51e3af" class="outline-3">
          <h3 id="orge51e3af">
            <span class="section-number-3">1.7.</span> Double spending
            prevention
          </h3>
          <div class="outline-text-3" id="text-1-7">
            <ul class="org-ul">
              <li>
                Bitcoin: uses UTXOs to track which inputs have been spent (no
                need to go through the entire chain).
              </li>
              <li>
                Ethereum: uses a nounce to track the number of transactions sent
                from an account, the nounce is included in the transaction and
                is incremented by 1 for every new transaction, and all
                transactions must be executed in order.
              </li>
            </ul>
          </div>
        </div>
        <div id="outline-container-org66c488b" class="outline-3">
          <h3 id="org66c488b">
            <span class="section-number-3">1.8.</span> Sealevel (Solana)
          </h3>
          <div class="outline-text-3" id="text-1-8">
            <ul class="org-ul">
              <li>
                Solana&rsquo;s parallel smart contract runtime to process
                thousands of contracts in parallel.
              </li>
              <li>
                Solana transactions describe all states a transaction accesses
                to efficiently recognize transaction dependency and to schedule
                parallel execution without accessing full blockchain state.
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div id="outline-container-org1430b39" class="outline-2">
        <h2 id="org1430b39">
          <span class="section-number-2">2.</span> Ways to achieve parallel
          processing
        </h2>
        <div class="outline-text-2" id="text-2">
          <ul class="org-ul">
            <li>Process independent transactions in parallel.</li>
            <li>Sharding.</li>
          </ul>
        </div>
      </div>
      <div id="outline-container-org7dbed89" class="outline-2">
        <h2 id="org7dbed89">
          <span class="section-number-2">3.</span> Production-ready parallelized
          EVM projects (Jan 2024)
        </h2>
        <div class="outline-text-2" id="text-3">
          <ul class="org-ul">
            <li>Sei: optimistic parallel execution.</li>
            <li>
              Monad: custom EVM implementation, optimistic parallel execution,
              <b><b>custom state database</b></b
              >.
              <ul class="org-ul">
                <li>
                  Commodity databases are not optimized for Merkle tree data
                  read/write with SSD.
                </li>
              </ul>
            </li>
            <li>Neon (Solana): transactions pre-specify dependencies.</li>
            <li>
              See
              <a
                href="https://chenyo-17.github.io/org-static-blog/tag-evm.html#orgcb5510d"
                >BNB chain post</a
              >
              for more solutions.
            </li>
          </ul>
        </div>
      </div>
      <div class="taglist">
        <a href="https://chenyo-17.github.io/org-static-blog/tags.html">Tags</a
        >:
        <a href="https://chenyo-17.github.io/org-static-blog/tag-evm.html"
          >evm</a
        >
        <a
          href="https://chenyo-17.github.io/org-static-blog/tag-parallel-evm.html"
          >parallel-evm</a
        >
        <a
          href="https://chenyo-17.github.io/org-static-blog/tag-blockworks.html"
          >blockworks</a
        >
      </div>
      <div class="post-date">07 Aug 2024</div>
      <h1 class="post-title">
        <a
          href="https://chenyo-17.github.io/org-static-blog/2024-08-07-my-exam-organization-experience.html"
          >My Exam Organization Experience</a
        >
      </h1>
      <nav id="table-of-contents" role="doc-toc">
        <h2>Table of Contents</h2>
        <div id="text-table-of-contents" role="doc-toc">
          <ul>
            <li><a href="#orgb0da976">1. What is it about?</a></li>
            <li><a href="#org3244f07">2. My first exam</a></li>
            <li><a href="#org39e4f97">3. My second exam</a></li>
            <li><a href="#orgc7bf20f">4. My third exam</a></li>
            <li><a href="#orge7e74b0">5. My fourth exam</a></li>
            <li><a href="#orga6d448a">6. My feeling</a></li>
          </ul>
        </div>
      </nav>
      <p>
        This post was co-authored with the assistance of Cursor and Claude AI.
      </p>
      <div id="outline-container-orgb0da976" class="outline-2">
        <h2 id="orgb0da976">
          <span class="section-number-2">1.</span> What is it about?
        </h2>
        <div class="outline-text-2" id="text-1">
          <p>
            Over the past years, I&rsquo;ve been involved in organizing and
            monitoring four exams. Yesterday marked my fourth and likely final
            exam monitoring session for the foreseeable future. Now seems like
            an opportune moment to reflect on my exam organization journey.
          </p>
        </div>
      </div>
      <div id="outline-container-org3244f07" class="outline-2">
        <h2 id="org3244f07">
          <span class="section-number-2">2.</span> My first exam
        </h2>
        <div class="outline-text-2" id="text-2">
          <p>
            My first exam experience was relatively straightforward. As I was
            unfamiliar with the exam content, my primary responsibility was
            taking students to the restrooms. I recall accompanying nearly 10
            students during the session. For the remainder of the time, I sat at
            the back of the room, occupying myself with some drawing.
          </p>
        </div>
      </div>
      <div id="outline-container-org39e4f97" class="outline-2">
        <h2 id="org39e4f97">
          <span class="section-number-2">3.</span> My second exam
        </h2>
        <div class="outline-text-2" id="text-3">
          <p>
            This exam was identical to the first, but I was tasked with
            designing a significant portion of the questions. Initially,
            formulating questions seemed straightforward, but I later realized
            my inability to create effective ones. My first draft incorporated
            connections between various questions. During the review process, I
            was advised to maximize information density in questions, as
            stressed students prefer concise text. Additional challenges emerged
            when I began grading the exams. For example, open-ended questions
            consistently yielded unexpected answers, requiring me to modify the
            grading scheme while maintaining consistency with previous
            assessments.
          </p>

          <p>
            The exam monitoring this time was more demanding as I began
            responding to student inquiries. My limited knowledge of the entire
            exam often required me to seek assistance from colleagues, and
            occasionally I struggled to comprehend the questions.
          </p>

          <p>
            Grading the exam proved to be the most challenging aspect of the
            process. Evaluating over 100 exams, deciphering handwriting,
            determining fair point allocations, and recording scores was an
            incredibly tedious task. Unlike traditional mathematics exams that
            focus primarily on calculations, our exam encouraged creative
            thinking. Each answer contained implicit assumptions about the
            question, requiring careful interpretation to avoid excessive point
            deductions. The process was extremely time-consuming and offered
            minimal personal benefit or satisfaction.
          </p>
        </div>
      </div>
      <div id="outline-container-orgc7bf20f" class="outline-2">
        <h2 id="orgc7bf20f">
          <span class="section-number-2">4.</span> My third exam
        </h2>
        <div class="outline-text-2" id="text-4">
          <p>
            This was a different exam, where I again designed one part and
            monitored its administration. Fortunately, due to its advanced
            nature, few students registered for this exam. This time, I had the
            privilege of collaborating with exceptional colleagues. Despite
            these advantages, the design process still demanded considerable
            effort on my part.
          </p>

          <p>
            A unique aspect of this exam was that I also developed the course
            material, as it was a newly introduced subject. The topic proved
            challenging, and the exercises were demanding. Students expressed
            concerns about the complexity of the material. Consequently, we
            faced the task of devising ways to simplify the exam questions
            without compromising their effectiveness.
          </p>
        </div>
      </div>
      <div id="outline-container-orge7e74b0" class="outline-2">
        <h2 id="orge7e74b0">
          <span class="section-number-2">5.</span> My fourth exam
        </h2>
        <div class="outline-text-2" id="text-5">
          <p>
            Now comes the most recent exam, where I took on the role of a
            coordinator. This position entailed not only designing my portion of
            the tasks but also finding colleagues to design other tasks,
            managing the timeline, reviewing drafts, printing exams,
            coordinating exam monitoring, and overseeing the grading process.
            Fortunately, I had the support of proactive and helpful colleagues,
            which allowed everything to proceed smoothly.
          </p>

          <p>
            The monitoring process proved particularly demanding this time. As I
            was now familiar with the entire exam, I was responsible for reading
            instructions, making announcements, and answering as many questions
            as possible. I had to arrive at the exam rooms by 8 AM, forgoing
            breakfast, and remained standing and focused until noon. In
            retrospect, I may have been overly diligent due to inexperience and
            could have perhaps allowed myself to relax more. However, I&rsquo;ll
            never know for certain, as this marks the conclusion of my exam
            organization duties.
          </p>

          <p>
            Well, not quite the end, as I still need to complete the grading and
            submit the results.
          </p>
        </div>
      </div>
      <div id="outline-container-orga6d448a" class="outline-2">
        <h2 id="orga6d448a">
          <span class="section-number-2">6.</span> My feeling
        </h2>
        <div class="outline-text-2" id="text-6">
          <p>
            After four instances of exam organization experience, I must admit
            that I do not recommend it. This opinion is, of course, highly
            personal, as I am not particularly inclined towards teaching. From
            my perspective, it is a job that demands significant effort while
            offering minimal returns. I can confidently say that I invest more
            time in the exam process than any individual student taking it.
          </p>

          <p>
            The process of designing and grading exams presents a complex
            optimization challenge. There&rsquo;s an inverse relationship
            between the time spent on design and the time required for grading.
            The less effort put into crafting the exam, the more time-consuming
            the grading process becomes. Moreover, it&rsquo;s disheartening to
            spend two full days meticulously designing and reviewing a question,
            only to have it attempted by a mere handful of students.
          </p>
        </div>
      </div>
      <div class="taglist">
        <a href="https://chenyo-17.github.io/org-static-blog/tags.html">Tags</a
        >:
        <a href="https://chenyo-17.github.io/org-static-blog/tag-personal.html"
          >personal</a
        >
        <a href="https://chenyo-17.github.io/org-static-blog/tag-teach.html"
          >teach</a
        >
      </div>
      <div id="archive">
        <a href="https://chenyo-17.github.io/org-static-blog/archive.html"
          >Other posts</a
        >
      </div>
    </div>
    <div id="postamble" class="status">
      <div id="search-results"></div>
      <footer>
        <p>© 2024 chenyo. Some rights reserved.</p>
      </footer>
    </div>
  </body>
</html>
